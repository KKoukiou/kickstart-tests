#test name: bond
%ksappend repos/default.ks
network --device=link --bootproto=dhcp

# Create testing bond interface
network --device=bond0 --bootproto=dhcp --bondslaves=link --activate

bootloader --timeout=1
zerombr
clearpart --all
autopart

keyboard us
lang en
timezone America/New_York
rootpw qweqwe
shutdown

%packages
%end

%post

@KSINCLUDE@ post-lib-network.sh

check_device_config_value bond0 DEVICE bond0 connection interface-name bond0
check_device_config_value bond0 TYPE Bond connection type bond
check_device_config_value bond0 ONBOOT yes connection autoconnect __NONE
check_device_config_value bond0 BOOTPROTO dhcp ipv4 method auto

# No error was written to /root/RESULT file, everything is OK
if [[ ! -e /root/RESULT ]]; then
   echo SUCCESS > /root/RESULT
fi
%end
