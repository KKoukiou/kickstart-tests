Example: provision only *runners* in a permanent *target*
---------------------------------------------------------

Only *runners* will be provisioned in the *target*. No *master* will be provisioned because the tests will run from local host as in this [use case](../../../ansible/README.md#b-run-a-test-run-from-master-on-runners).
At the end the *target* will be destroyed.

#### Resources configuration:

[PinFile](PinFile)

contains these modifications of the [template pinfile](../../PinFile):

* `count` - provision only *runners* without any *master* (`inventory_layout`)

#### Provision the *target*
```
./kstests-in-cloud.sh provision kstest-runners --pinfile examples/example6/PinFile
```

#### Add authorized ssh key to the *runners*

If you want to access the runners using specific [ssh key](../../README.md#ssh-keys) (other than the one used for deployment), you can add it to *runners*' authorized keys by dropping the public key into kstest roles's [drop directory](../../../ansible/roles/kstest/files/authorized_keys) and re-running the *runners* deployment playbook:
```
cp ~/.ssh/id_rsa.pub ansible/roles/kstest/files/authorized_keys/
ansible-playbook -i linchpin/inventories/kstest-runners.inventory ansible/kstest-runners-deploy.yml
```

Note that the playbook is using *target* inventory (`-i` option) generated by its provisioning. To get the path of the *target*'s inventory, run:
```
./kstests-in-cloud.sh status --show-inventory kstest-runners
```
showing:
```
Target "kstest-runners" has generated inventory linchpin/inventories/kstest-runners.inventory
```

#### Run a test

See this [use case](../../../ansible/README.md#a-run-a-test-run-from-local-host-on-deployed-runners). The *runners* have been provisioned and deployed with `kstest-runners` *target* so only the information about test running and results is relevant in this case.

#### Destroy the *target*
```
./kstests-in-cloud.sh destroy kstest-runners --pinfile examples/example6/PinFile
```
